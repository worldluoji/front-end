!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CssSelectorGenerator=t():e.CssSelectorGenerator=t()}(self,()=>(()=>{"use strict";var r={d:(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},e={};function s(e){return"object"==typeof e&&null!==e&&e.nodeType===Node.ELEMENT_NODE}r.r(e),r.d(e,{default:()=>J,getCssSelector:()=>_});const u={NONE:"",DESCENDANT:" ",CHILD:" > "},f={id:"id",class:"class",tag:"tag",attribute:"attribute",nthchild:"nthchild",nthoftype:"nthoftype"},n="CssSelectorGenerator";function o(e="unknown problem",...t){console.warn(n+": "+e,...t)}const d={selectors:[f.id,f.class,f.tag,f.attribute],includeTag:!1,whitelist:[],blacklist:[],combineWithinSelector:!0,combineBetweenSelectors:!0,root:null,maxCombinations:Number.POSITIVE_INFINITY,maxCandidates:Number.POSITIVE_INFINITY};function i(e){return e instanceof RegExp}function t(e){return["string","function"].includes(typeof e)||i(e)}function m(e){return Array.isArray(e)?e.filter(t):[]}function a(e){const t=[Node.DOCUMENT_NODE,Node.DOCUMENT_FRAGMENT_NODE,Node.ELEMENT_NODE];return e instanceof Node&&t.includes(e.nodeType)}function p(e,t){if(a(e))return e.contains(t)||o("element root mismatch","Provided root does not contain the element. This will most likely result in producing a fallback selector using element's real root node. If you plan to use the selector using provided root (e.g. `root.querySelector`), it will not work as intended."),e;e=t.getRootNode({composed:!1});return a(e)?(e!==document&&o("shadow root inferred","You did not provide a root and the element is a child of Shadow DOM. This will produce a selector using ShadowRoot as a root. If you plan to use the selector using document as a root (e.g. `document.querySelector`), it will not work as intended."),e):S(t)}function g(e){return"number"==typeof e?e:Number.POSITIVE_INFINITY}function h(e=[]){const[t=[],...n]=e;return 0===n.length?t:n.reduce((e,t)=>e.filter(e=>t.includes(e)),t)}function l(e){return[].concat(...e)}function b(e){const n=e.map(t=>{if(i(t))return e=>t.test(e);if("function"==typeof t)return e=>{e=t(e);return"boolean"!=typeof e?(o("pattern matcher function invalid","Provided pattern matching function does not return boolean. It's result will be ignored.",t),!1):e};if("string"!=typeof t)return o("pattern matcher invalid","Pattern matching only accepts strings, regular expressions and/or functions. This item is invalid and will be ignored.",t),()=>!1;{const n=new RegExp("^"+t.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".+")+"$");return e=>n.test(e)}});return t=>n.some(e=>e(t))}function y(e,t,n){const r=Array.from(p(n,e[0]).querySelectorAll(t));return r.length===e.length&&e.every(e=>r.includes(e))}function N(e,t){t=null!=t?t:S(e);const n=[];let r=e;for(;s(r)&&r!==t;)n.push(r),r=r.parentElement;return n}function S(e){return e.ownerDocument.querySelector(":root")}const E=", ",c=new RegExp(["^$","\\s"].join("|")),v=new RegExp(["^$"].join("|")),w=[f.nthoftype,f.tag,f.id,f.class,f.attribute,f.nthchild],I=b(["class","id","ng-*"]);function k({name:e}){return`[${e}]`}function L({name:e,value:t}){return`[${e}='${t}']`}function M({nodeName:e,nodeValue:t}){return{name:P(e),value:P(null!=t?t:void 0)}}function T(r){const e=Array.from(r.attributes).filter(e=>{var[{nodeName:e,nodeValue:t},n]=[e,r];return n=n.tagName.toLowerCase(),!(["input","option"].includes(n)&&"value"===e||"src"===e&&null!=t&&t.startsWith("data:")||I(e))}).map(M);return[...e.map(k),...e.map(L)]}function O(e){return(null!=(e=e.getAttribute("class"))?e:"").trim().split(/\s+/).filter(e=>!v.test(e)).map(e=>"."+P(e))}function C(e){var t=null!=(t=e.getAttribute("id"))?t:"",n="#"+P(t),r=e.getRootNode({composed:!1});return!c.test(t)&&y([e],n,r)?[n]:[]}function x(e){var t=e.parentNode;if(t){t=Array.from(t.childNodes).filter(s).indexOf(e);if(-1<t)return[`:nth-child(${String(t+1)})`]}return[]}function j(e){return[P(e.tagName.toLowerCase())]}function A(e){e=[...new Set(l(e.map(j)))];return 0===e.length||1<e.length?[]:[e[0]]}function D(e){const t=A([e])[0],n=e.parentElement;if(n){const r=Array.from(n.children).filter(e=>e.tagName.toLowerCase()===t),o=r.indexOf(e);if(-1<o)return[`${t}:nth-of-type(${String(o+1)})`]}return[]}function R(e=[],{maxResults:t=Number.POSITIVE_INFINITY}={}){return Array.from(function*(t=[],{maxResults:e=Number.POSITIVE_INFINITY}){let n=0,r=$(1);for(;r.length<=t.length&&n<e;){n+=1;const e=r.map(e=>t[e]);yield e,r=function(e=[],t){var n=e.length;if(0===n)return[];const r=[...e];r[n-1]+=1;for(let e=n-1;0<=e;e--)if(r[e]>t){if(0===e)return $(n+1);r[e-1]++,r[e]=r[e-1]+1}return r[n-1]>t?$(n+1):r}(r,t.length-1)}}(e,{maxResults:t}))}function $(e=1){return Array.from(Array(e).keys())}const V=":".charCodeAt(0).toString(16).toUpperCase(),F=/[ !"#$%&'()\[\]{|}<>*+,./;=?@^`~\\]/;function P(e=""){return CSS?CSS.escape(e):([e=""]=[e],e.split("").map(e=>":"===e?`\\${V} `:F.test(e)?"\\"+e:escape(e).replace(/%/g,"\\")).join(""))}const Y={tag:A,id:function(e){return 0===e.length||1<e.length?[]:C(e[0])},class:function(e){return h(e.map(O))},attribute:function(e){return h(e.map(T))},nthchild:function(e){return h(e.map(x))},nthoftype:function(e){return h(e.map(D))}},W={tag:j,id:C,class:O,attribute:T,nthchild:x,nthoftype:D};function q(e){return e.includes(f.tag)||e.includes(f.nthoftype)?[...e]:[...e,f.tag]}function B(t={}){const e=[...w];return t[f.tag]&&t[f.nthoftype]&&e.splice(e.indexOf(f.tag),1),e.map(e=>{return t[e=e]?t[e].join(""):""}).join("")}function G(e,t,n="",r){c=function(s,r){const{blacklist:e,whitelist:t,combineWithinSelector:f,maxCombinations:d}=r,m=b(e),p=b(t);return function(){const{selectors:e,includeTag:t}=r,n=[...e];return t&&!n.includes("tag")&&n.push("tag"),n}().reduce((e,t)=>{u=s,l=t;const n=(0,Y[l])(u),r=([l=[],a,c]=[n,m,p],l.filter(e=>c(e)||!a(e))),o=([u=[],i]=[r,p],u.sort((e,t)=>{e=i(e),t=i(t);return e&&!t?-1:!e&&t?1:0}));var i,a,c,u,l;return e[t]=f?R(o,{maxResults:d}):o.map(e=>[e]),e},{})}(e,r=r),i=c,a=r,c=l(function(){const{selectors:e,combineBetweenSelectors:t,includeTag:n,maxCandidates:r}=a,o=t?R(e,{maxResults:r}):e.map(e=>[e]);return n?o.map(q):o}().map(e=>{{var n=i;const r={};return e.forEach(e=>{var t=n[e];t&&0<t.length&&(r[e]=t)}),function(e={}){let r=[];return Object.entries(e).forEach(([n,e])=>{r=e.flatMap(t=>0===r.length?[{[n]:t}]:r.map(e=>Object.assign(Object.assign({},e),{[n]:t})))}),r}(r).map(B)}}).filter(e=>0<e.length)),r=[...new Set(c)];var o,i,a,c=""===n?r:(o=n,[...(r=r).map(e=>o+u.DESCENDANT+e),...r.map(e=>o+u.CHILD+e)]);for(const n of c)if(y(e,n,t))return n;return null}function H(e){return{value:e,include:!1}}function U({selectors:t,operator:e}){let n=[...w],r=(t[f.tag]&&t[f.nthoftype]&&(n=n.filter(e=>e!==f.tag)),"");return n.forEach(e=>{(null!=(e=t[e])?e:[]).forEach(({value:e,include:t})=>{t&&(r+=e)})}),e+r}function z(e){return[":root",...N(e).reverse().map(e=>{const t=function(n,e,t=u.NONE){const r={};return e.forEach(e=>{var t;Reflect.set(r,e,(t=n,e=e,W[e](t).map(H)))}),{element:n,operator:t,selectors:r}}(e,[f.nthchild],u.CHILD);return t.selectors.nthchild.forEach(e=>{e.include=!0}),t}).map(U)].join("")}function _(e,t={}){var n;const a=function(e){(e instanceof NodeList||e instanceof HTMLCollection)&&(e=Array.from(e));e=(Array.isArray(e)?e:[e]).filter(s);return[...new Set(e)]}(e),c=([e,t={}]=[a[0],t],t=Object.assign(Object.assign({},d),t),{selectors:(n=t.selectors,Array.isArray(n)?n.filter(e=>{return t=f,e=e,Object.values(t).includes(e);var t}):[]),whitelist:m(t.whitelist),blacklist:m(t.blacklist),root:p(t.root,e),combineWithinSelector:!!t.combineWithinSelector,combineBetweenSelectors:!!t.combineBetweenSelectors,includeTag:!!t.includeTag,maxCombinations:g(t.maxCombinations),maxCandidates:g(t.maxCandidates)}),r=null!=(n=c.root)?n:S(a[0]);let u="",l=r;function o(){{var[e,t,n="",r]=[a,l,u,c],o;if(0===e.length)return null;const i=[1<e.length?e:[],...(o=t,h(e.map(e=>N(e,o))).map(e=>[e]))];for(const e of i){const i=G(e,t,n,r);if(i)return{foundElements:e,selector:i}}return null}}let i=o();for(;i;){const{foundElements:e,selector:t}=i;if(y(a,t,r))return t;l=e[0],u=t,i=o()}return(1<a.length?a.map(e=>_(e,c)):a.map(z)).join(E)}const J=_;return e})());