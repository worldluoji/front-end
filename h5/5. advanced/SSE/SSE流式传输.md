# SSE流式传输
SSE 全称为 Server-sent events , 是一种基于 HTTP 协议的通信技术，允许服务器主动向客户端（通常是Web浏览器）发送更新。

它是 HTML5 标准的一部分，设计初衷是用来建立一个单向的服务器到客户端连接，使得服务器可以实时地向客户端发送数据。

ChatGPT就是使用了SSE.

## SSE 技术原理
响应头header设置
```
Content-Type: text/event-stream
Cache-Control: no-cache
Connection: keep-alive
```
- 想要使用 SSE 技术构建需要服务器实时推送信息到客户端的连接，只需要将传统的 http 响应头的 contentType 设置为 text/event-stream 。
- 并且为了保证客户端展示的是最新数据，需要将 Cache-Control 设置为 no-cache 。
- 在此基础上，SSE 本质是一个 TCP 连接，因此为了保证 SSE 的持续开启，需要将 Connection 设置为 keep-alive 。

## demo
-> sse-demo

## 应用场景
- 实时天气
- 实时股票
- 实时库更新
- 秒杀状态通知
- ......

## 兼容性
根据caniuse，除了 IE 和低版本的主流浏览器，目前市面上绝大多数浏览器都支持 SSE 通信

## SSE vs websockets
|特性/因素|SSE|WebSockets|
|----|----|----|
|协议|基于 HTTP，使用标准 HTTP 连接|单独的协议（ws:// 或 wss://），需要握手升级|
|通信方式|单向通信（服务器到客户端）|全双工通信|
|数据格式|文本（UTF-8 编码）|文本或二进制|
|重连机制|浏览器自动重连|需要手动实现重连机制|
|实时性|高（适合频繁更新的场景）|非常高（适合高度交互的实时应用）|
|浏览器支持|良好（大多数现代浏览器支持）|非常好（几乎所有现代浏览器支持）|
|适用场景|实时通知、新闻 feed、股票价格等需要从服务器推送到客户端的场景|在线游戏、聊天应用、实时交互应用|
|复杂性|较低，易于实现和维护|较高，需要处理连接的建立、维护和断开|
|兼容性和可用性|基于 HTTP，更容易通过各种中间件和防火墙|可能需要配置服务器和网络设备以支持 WebSocket|
|服务器负载|适合较低频率的数据更新|适合高频率消息和高度交互的场景|
