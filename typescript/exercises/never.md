# never
åœ¨ TypeScript ä¸­ï¼Œ`never` ç±»å‹è¡¨ç¤º**æ°¸ä¸å­˜åœ¨çš„å€¼ç±»å‹**ï¼Œæ˜¯æœ€åº•å±‚çš„ç±»å‹ï¼ˆbottom typeï¼‰ã€‚å®ƒç”¨äºè¡¨ç¤ºæ°¸è¿œ**ä¸ä¼šå‘ç”Ÿ**æˆ–**ä¸åº”è¯¥å‘ç”Ÿ**çš„æƒ…å†µã€‚ä»¥ä¸‹æ˜¯å…³é”®ä½¿ç”¨åœºæ™¯ï¼š

---

### âœ… **`never` çš„æ ¸å¿ƒä½¿ç”¨åœºæ™¯**

#### 1. **å‡½æ•°æ°¸è¿œä¸è¿”å›**ï¼ˆæŠ›å‡ºå¼‚å¸¸æˆ–æ— é™å¾ªç¯ï¼‰
```typescript
// æŠ›å‡ºé”™è¯¯ï¼ˆæ°¸ä¸è¿”å›ï¼‰
function crashApp(message: string): never {
    throw new Error(message);
}

// æ— é™å¾ªç¯ï¼ˆæ°¸ä¸è¿”å›ï¼‰
function infiniteLoop(): never {
    while(true) { /* ... */ }
}
```

#### 2. **ç±»å‹æ”¶çª„çš„ç©·å°½æ£€æŸ¥**ï¼ˆExhaustiveness Checkï¼‰
```typescript
type Shape = Circle | Square;

function getArea(shape: Shape) {
    switch (shape.kind) {
        case "circle": return Math.PI * shape.radius ** 2;
        case "square": return shape.side ** 2;
        default: 
            // TypeScript ä¼šæ¨æ–­æ­¤å¤„çš„ shape æ˜¯ never
            const _exhaustiveCheck: never = shape;
            return _exhaustiveCheck;
    }
}
```
**ä½œç”¨**ï¼šå½“æ–°å¢ `Triangle` ç±»å‹åˆ° `Shape` æ—¶ï¼ŒTS ä¼šæç¤º `default` åˆ†æ”¯é”™è¯¯ï¼Œå¼ºåˆ¶ä½ å¤„ç†æ–°ç±»å‹ã€‚

#### 3. **è¿‡æ»¤è”åˆç±»å‹ä¸­çš„æ— æ•ˆå€¼**
```typescript
// ç§»é™¤ null/undefined
type NonNullable<T> = T extends null | undefined ? never : T;

// è·å–å‡½æ•°å‚æ•°ç±»å‹
type FunctionParams<T> = T extends (...args: infer P) => any ? P : never;
```

#### 4. **è¡¨ç¤ºç©ºæ•°ç»„ç±»å‹**
```typescript
const emptyArray: never[] = [];
// ä»»ä½•æ·»åŠ æ“ä½œéƒ½ä¼šæŠ¥é”™
emptyArray.push("something"); // âŒ é”™è¯¯ï¼šç±»å‹ "string" ä¸èƒ½èµ‹ç»™ never
```

---

### ğŸ†š **`never` vs `void` vs `unknown`**

| **ç±»å‹** | **å«ä¹‰**                          | **èµ‹å€¼è§„åˆ™**                                | å…¸å‹åœºæ™¯                     |
|----------|-----------------------------------|------------------------------------------|------------------------------|
| `never`  | æ°¸ä¸å­˜åœ¨çš„å€¼                      | ä¸èƒ½èµ‹å€¼ç»™ä»»ä½•ç±»å‹ï¼ˆé™¤è‡ªèº«å’Œ`any`ï¼‰       | é”™è¯¯å¤„ç†/ç©·å°½æ£€æŸ¥            |
| `void`   | ç©ºå€¼ï¼ˆé€šå¸¸æ˜¯`undefined`ï¼‰         | å¯èµ‹å€¼ç»™`void`/`any`/`unknown`           | å‡½æ•°æ— è¿”å›å€¼                 |
| `unknown`| æœªçŸ¥ç±»å‹ï¼ˆéœ€æ£€æŸ¥ï¼‰                | å¯èµ‹å€¼ç»™`any`/`unknown`ï¼Œå…¶å®ƒéœ€æ–­è¨€       | åŠ¨æ€ç±»å‹çš„å®‰å…¨å®¹å™¨           |

---

### ğŸ”‘ **å…³é”®ç‰¹æ€§**
1. **åº•å±‚ç±»å‹**ï¼šæ‰€æœ‰ç±»å‹éƒ½å¯ä»¥èµ‹ç»™ `never` çš„çˆ¶ç±»å‹ï¼ˆå¦‚ `any`/`unknown`ï¼‰ï¼Œä½† `never` **åªèƒ½èµ‹ç»™è‡ªå·±**ã€‚
   ```typescript
   declare const nev: never;
   const a: string = nev; // âŒ é”™è¯¯ï¼šä¸èƒ½å°† never èµ‹ç»™ string
   ```

2. **è”åˆç±»å‹ä¸­è¢«å¿½ç•¥**ï¼š
   ```typescript
   type T = string | never; // ç­‰ä»·äº string
   ```

3. **äº¤å‰ç±»å‹ä¸­è¢«å¸æ”¶**ï¼š
   ```typescript
   type T = string & never; // ç­‰ä»·äº never
   ```

---

### âš ï¸ **å¸¸è§è¯¯åŒº**
- **ä¸è¦æ‰‹åŠ¨æ ‡æ³¨å˜é‡ä¸º `never`**ï¼šé™¤éç”¨äºç©·å°½æ£€æŸ¥æˆ–ç©ºæ•°ç»„ç­‰ç‰¹æ®Šåœºæ™¯ã€‚
- **ä¸è¦å°† `never` ä½œä¸ºå‚æ•°ç±»å‹**ï¼šè¿™ä¼šä½¿å‡½æ•°æ— æ³•è°ƒç”¨ï¼ˆæ— æ³•ä¼ é€’ä»»ä½•å€¼ï¼‰ã€‚
  ```typescript
  function fn(arg: never) {}
  fn(1); // âŒ é”™è¯¯ï¼šç±»å‹ "number" ä¸èƒ½èµ‹ç»™ never
  ```

---

### **ä½•æ—¶é€‰æ‹© `never` ï¼Ÿ**
| **åœºæ™¯**                      | **æ¨èç±»å‹** |
|-------------------------------|-------------|
| å‡½æ•°æ°¸ä¸è¿”å›ï¼ˆå¼‚å¸¸/æ­»å¾ªç¯ï¼‰    | âœ… `never`   |
| è”åˆç±»å‹çš„å®Œæ•´æ€§æ£€æŸ¥          | âœ… `never`   |
| ç±»å‹å·¥å…·ä¸­çš„æ— æ•ˆå€¼å ä½        | âœ… `never`   |
| å‡½æ•°æ­£å¸¸æ— è¿”å›å€¼              | â›” `void`     |
| åŠ¨æ€å†…å®¹å®¹å™¨                  | â›” `unknown`  |

é€šè¿‡åˆç†ä½¿ç”¨ `never`ï¼Œä½ å¯ä»¥åˆ©ç”¨ TypeScript çš„ç±»å‹ç³»ç»Ÿå¼ºåˆ¶å¤„ç†è¾¹ç•Œæƒ…å†µï¼Œå®ç°æ›´å®‰å…¨çš„ç±»å‹è®¾è®¡ã€‚