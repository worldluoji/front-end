Vite 5 相对于 Vite 4 在性能、API清理、兼容性以及开发体验方面进行了进一步的提升。以下是 Vite 5 的一些主要改进点：

1. **性能提升**:
   - Vite 5 开始使用 Rollup 4，这带来了显著的构建性能提升。
   - 引入了 `server.warmup` 功能，允许用户定义一个模块列表，在服务器启动后立即进行预转换，从而缩短启动时间。当使用 `--open` 或 `server.open` 选项时，Vite 会自动预热应用的入口点或提供的 URL。

2. **API 清理与简化**:
   - 删除了一些已弃用的功能，精简了 API，使得代码更加简洁。
   - 解决了一些长期存在的问题，例如将某些正则表达式替换为更合适的 AST（抽象语法树）操作。

3. **面向未来的改进**:
   - 要求 Node.js 18+，并废弃了 CJS（CommonJS）节点 API，使 Vite 更加现代化。
   - 继续推进 Rolldown 的开发，这是一个基于 Rust 的 Rollup 端口，旨在提高构建和开发性能，并减少开发和构建之间的不一致性。

4. **新的性能指南**:
   - 提供了一个新的性能指南，帮助开发者识别和修复常见的性能问题。

5. **生态系统支持**:
   - 与社区合作确保平稳过渡到新版本，包括对插件和其他工具的支持。
   - Vite 团队继续与生态系统的其他成员紧密合作，以确保 Vite 与其他工具如 Storybook、Nx 和 Playwright 的良好集成。

6. **开发环境**:
   - 改进了在 Deno 和 Bun 中使用 Vite 的体验。
   - 进一步增强了与各种框架（如 Astro、Nuxt、SvelteKit、Solid Start、Qwik City 等）的兼容性和集成。

7. **迁移指南**:
   - 提供了详细的迁移指南来帮助用户从 Vite 4 升级到 Vite 5，尽管大多数项目升级应该是直接的，但建议在升级前查阅这些指南。

8. **社区和支持**:
   - 鼓励更多的社区参与，通过贡献代码、审查 PR、提供文档翻译等方式。
   - 增强了对赞助商的支持，感谢那些资助 Vite 发展的个人和公司。


## reference
https://vite.vuejs.ac.cn/guide/migration#rollup-4