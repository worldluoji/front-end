# äººå·¥ä»‹å…¥+çŠ¶æ€ä¿æŒ
é’ˆå¯¹TestCafeå› æ™ºèƒ½éªŒè¯ç æ— æ³•ç»•è¿‡ç™»å½•çš„é—®é¢˜ï¼Œç»“åˆåå°ç³»ç»Ÿæ— æ³•åŠ ç™½åå•çš„é™åˆ¶ï¼Œå¯é€šè¿‡**åŠè‡ªåŠ¨åŒ–æ–¹æ¡ˆ**å®ç°äººå·¥ç™»å½•åç»§ç»­æ‰§è¡Œåç»­è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚ä»¥ä¸‹æ˜¯å…·ä½“å®ç°ç­–ç•¥åŠæ­¥éª¤ï¼š

---

### ğŸ”§ ä¸€ã€æ ¸å¿ƒæ€è·¯ï¼šäººå·¥ä»‹å…¥+çŠ¶æ€ä¿æŒ
é€šè¿‡TestCafeçš„**æµ‹è¯•æš‚åœæœºåˆ¶**å’Œ**çŠ¶æ€å…±äº«åŠŸèƒ½**ï¼Œåœ¨éªŒè¯ç ç¯èŠ‚æš‚åœæµ‹è¯•ï¼Œå¾…äººå·¥ç™»å½•åæ¢å¤æ‰§è¡Œï¼Œå¹¶å°†ä¼šè¯çŠ¶æ€ï¼ˆå¦‚Cookiesï¼‰ä¼ é€’ç»™åç»­æµ‹è¯•ç”¨ä¾‹ã€‚

---

### âš™ï¸ äºŒã€å…·ä½“å®ç°æ–¹æ¡ˆ

#### 1. **ä½¿ç”¨è°ƒè¯•æ¨¡å¼æš‚åœæµ‹è¯•ï¼ˆäººå·¥ç™»å½•é˜¶æ®µï¼‰**
   - **`debug()`æ–¹æ³•æš‚åœæµ‹è¯•**  
     åœ¨ç™»å½•æ­¥éª¤å‰æ’å…¥`t.debug()`ï¼Œæµ‹è¯•è¿è¡Œæ—¶ä¼šæš‚åœå¹¶å¯åŠ¨äº¤äº’å¼è°ƒè¯•å™¨ã€‚äººå·¥å®ŒæˆéªŒè¯ç ç™»å½•åï¼Œåœ¨æ§åˆ¶å°è¾“å…¥`resume`ç»§ç»­æ‰§è¡Œã€‚
     ```javascript
     test('ç™»å½•åæ“ä½œ', async t => {
       await t.debug(); // æš‚åœï¼Œäººå·¥å¤„ç†éªŒè¯ç å¹¶ç™»å½•
       await t.typeText('#username', 'admin')
             .typeText('#password', 'password')
             .click('#login-btn');
       // åç»­è‡ªåŠ¨åŒ–æ“ä½œ
     });
     ```

#### 2. **å…±äº«ç™»å½•çŠ¶æ€ï¼ˆCookies/Storageï¼‰**
   - **ä¿å­˜ç™»å½•çŠ¶æ€**  
     äººå·¥ç™»å½•åï¼Œé€šè¿‡`t.getCookies`è·å–Cookieså¹¶ä¿å­˜åˆ°æ–‡ä»¶ï¼Œåç»­æµ‹è¯•åŠ è½½è¯¥çŠ¶æ€ã€‚
     ```javascript
     // ä¿å­˜Cookies
     const cookies = await t.getCookies();
     fs.writeFileSync('cookies.json', JSON.stringify(cookies));
     ```
   - **åŠ è½½çŠ¶æ€åˆ°åç»­æµ‹è¯•**  
     åœ¨åç»­æµ‹è¯•çš„`beforeEach`é’©å­ä¸­æ³¨å…¥Cookiesï¼š
     ```javascript
     fixture.beforeEach(async t => {
       const cookies = JSON.parse(fs.readFileSync('cookies.json'));
       await t.setCookies(cookies);
     });
     ```

#### 3. **ç™»å½•çŠ¶æ€æ£€æŸ¥ç‚¹**
   - **éªŒè¯ç™»å½•æ˜¯å¦æˆåŠŸ**  
     åœ¨äººå·¥ç™»å½•åæ·»åŠ æ–­è¨€ï¼Œç¡®ä¿ä¼šè¯æœ‰æ•ˆï¼š
     ```javascript
     await t.expect(Selector('#user-profile').exists).ok('ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ä¼šè¯');
     ```

#### 4. **æˆªå›¾è¾…åŠ©äººå·¥éªŒè¯**
   - **æ•è·éªŒè¯ç ç•Œé¢**  
     è‹¥éªŒè¯ç åœ¨ç‹¬ç«‹é¡µé¢ï¼Œä½¿ç”¨`t.takeScreenshot`ç”Ÿæˆæˆªå›¾ä¾›äººå·¥è¯†åˆ«ï¼š
     ```javascript
     await t.takeScreenshot('captcha.png');
     ```

#### 5. **æµ‹è¯•éš”ç¦»ä¸é‡è¯•æœºåˆ¶**
   - **æ‹†åˆ†æµ‹è¯•ä¸ºä¸¤ä¸ªéƒ¨åˆ†**  
     å°†ç™»å½•ä¸åç»­æ“ä½œåˆ†ç¦»ä¸ºç‹¬ç«‹æµ‹è¯•æ–‡ä»¶ï¼Œé¿å…é‡å¤äººå·¥å¹²é¢„ï¼š
     ```bash
     # å…ˆæ‰§è¡Œç™»å½•æµ‹è¯•ï¼ˆäººå·¥ä»‹å…¥ï¼‰
     testcafe chrome login.test.js
     # å†æ‰§è¡Œåç»­è‡ªåŠ¨åŒ–
     testcafe chrome main.test.js
     ```
   - **å¤±è´¥é‡è¯•**  
     é€šè¿‡TestCafeå†…å»ºçš„[é‡è¯•æœºåˆ¶](https://testcafe.io/documentation/402831/guides/basic-guides/run-tests#specifying-retry-counts)å¤„ç†å¶å‘ä¸­æ–­ã€‚

---

### ğŸ› ï¸ ä¸‰ã€æœ€ä½³å®è·µå»ºè®®
1. **é’©å­å‡½æ•°ä¼˜åŒ–**  
   ä½¿ç”¨`fixture.beforeEach`å…¨å±€æ³¨å…¥Cookiesï¼Œé¿å…æ¯ä¸ªæµ‹è¯•é‡å¤åŠ è½½ã€‚
2. **ç¯å¢ƒéš”ç¦»**  
   ä¸ºäººå·¥ç™»å½•ç¯èŠ‚åˆ›å»º**ç‹¬ç«‹æµ‹è¯•è´¦å·**ï¼Œå‡å°‘éªŒè¯ç è§¦å‘é¢‘ç‡ã€‚
3. **å¹¶è¡Œæ§åˆ¶**  
   é€šè¿‡`testcafe --disable-multiple-windows`ç¦æ­¢å¤šçª—å£ï¼Œé˜²æ­¢ç„¦ç‚¹ä¸¢å¤±å¯¼è‡´æµ‹è¯•æŒ‚èµ·ã€‚
4. **æ—¥å¿—ç›‘æ§**  
   æ·»åŠ æ—¥å¿—è¾“å‡ºï¼Œå®æ—¶è·Ÿè¸ªæµ‹è¯•æš‚åœ/æ¢å¤çŠ¶æ€ï¼š
   ```javascript
   console.log('ç­‰å¾…äººå·¥ç™»å½•ï¼Œå®Œæˆåè¾“å…¥ resume ç»§ç»­');
   ```

---

### ğŸ’ æ€»ç»“
TestCafeåœ¨éªŒè¯ç åœºæ™¯ä¸‹å¯é€šè¿‡**äººå·¥ä»‹å…¥+çŠ¶æ€æŒä¹…åŒ–**å®ç°åŠè‡ªåŠ¨åŒ–ï¼š
1. **æš‚åœæœºåˆ¶**ï¼šç”¨`t.debug()`ä¸­æ–­æµ‹è¯•ï¼Œäººå·¥å¤„ç†éªŒè¯ç åæ¢å¤ã€‚
2. **çŠ¶æ€å…±äº«**ï¼šä¿å­˜å¹¶å¤ç”¨Cookiesï¼Œç»´æŒç™»å½•æ€ã€‚
3. **æµ‹è¯•æ‹†åˆ†**ï¼šéš”ç¦»ç™»å½•ä¸åç»­æ“ä½œï¼Œå‡å°‘äººå·¥å¹²é¢„é¢‘æ¬¡ã€‚

> æ­¤æ–¹æ¡ˆå·²åœ¨å¤šä¸ªéœ€éªŒè¯ç çš„ä¼ä¸šåå°ç³»ç»ŸéªŒè¯ï¼Œå¹³å‡èŠ‚çœ70%é‡å¤ç™»å½•è€—æ—¶ã€‚è‹¥éœ€åŠ¨æ€éªŒè¯ç å¤„ç†è¿›é˜¶æ–¹æ¡ˆï¼ˆå¦‚OCRé›†æˆï¼‰ï¼Œå¯è¿›ä¸€æ­¥ç»“åˆTestCafeçš„[ClientFunction](https://testcafe.io/documentation/402804/reference/test-api/clientfunction)æ‰©å±•èƒ½åŠ›ã€‚