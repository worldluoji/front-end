# Hooks
在 React 中，Hooks 就是把某个目标结果钩到某个可能会变化的数据源或者事件源上，
那么当被钩到的数据或事件发生变化时，产生这个目标结果的代码会重新执行，产生更新后的结果。

Hooks 中被钩的对象，不仅可以是某个独立的数据源，也可以是另一个 Hook 执行的结果，这就带来了 Hooks 的最大好处：逻辑的复用。

Hooks 在一定程度上更好地体现了 React 的开发思想，即从 State => View 的函数式映射。
此外， Hooks 也解决了 Class 组件存在的一些代码冗余、难以逻辑复用的问题。

但是正如我在这节课开头提到  的，两种方式在 React 开发中几乎是完全等价的，没有绝对的优劣。
如果你决定开始使用 Hooks，那么对于已有的 Class 组件，其实是完全没必要进行立刻重构的。只要在新的功能上，再来使用函数组件和 Hooks 就可以了。

React 提供的 Hooks 其实非常少，一共只有 10 个，比如 useState、useEffect、useCallback、useMemo、useRef、useContesxt 等等。

<br>

## useState: 让函数组件具有维持状态的能力
```
// 定义一个年龄的 state，初始值是 42
const [age, setAge] = useState(42);
// 定义一个水果的 state，初始值是 banana
const [fruit, setFruit] = useState('banana');
// 定一个一个数组 state，初始值是包含一个 todo 的数组
const [todos, setTodos] = useState([{ text: 'Learn Hooks' }]);
```
通常来说，我们要遵循的一个原则就是：state 中永远不要保存可以通过计算得到值。比如：
- 从 props 传递过来的值。有时候 props 传递过来的值无法直接使用，而是要通过一定的计算后再在 UI 上展示，比如说排序。那么我们要做的就是每次用的时候，都重新排序一下，或者利用某些 cache 机制，而不是将结果直接放到 state 里。
- 从 URL 中读到的值。比如有时需要读取 URL 中的参数，把它作为组件的一部分状态。那么我们可以在每次需要用的时候从 URL 中读取，而不是读出来直接放到 state 里。
- 从 cookie、localStorage 中读取的值。通常来说，也是每次要用的时候直接去读取，而不是读出来后放到 state 里。

<br>

## useEffect：执行副作用
什么是副作用呢？通常来说，副作用是指一段和当前执行结果无关的代码。
比如说要修改函数外部的某个变量，要发起一个请求，等等。
也就是说，在函数组件的当次执行过程中，useEffect 中代码的执行是不影响渲染出来的 UI 的。
``
useEffect(callback, dependencies)
```
第一个为要执行的函数 callback，第二个是可选的依赖项数组 dependencies。
其中依赖项是可选的，如果不指定，那么 callback 就会在<strong>每次组件render()完后都执行</strong>；
如果指定了，那么只有<strong>依赖项中的值发生变化</strong>的时候，它才会执行。